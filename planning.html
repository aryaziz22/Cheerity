<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cheerity - Planning</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="bootstrap/css/extbootstrap.css" />
    <link rel="shortcut icon" href="assets/image/Logo_cheerity.png" type="image/x-icon" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <style>
        .calendar table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }

        .calendar td {
            height: 40px;
            cursor: pointer;
            border-radius: 6px;
        }

        .calendar td.active {
            background-color: gold;
            font-weight: bold;
        }

        .donation-card {
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            transition: background 0.2s;
        }

        .donation-card:hover {
            background-color: #f1f1f1;
        }

        .donation-icon {
            font-size: 24px;
            margin-right: 10px;
        }

        .donation-details h4 {
            margin: 0 0 4px 0;
        }

        .section-title {
            font-weight: bold;
            margin: 15px 0 10px;
        }

        .form-toggle .btn {
            width: 100px;
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light p-3">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold fs-3" href="#" style="color: #F4BD22;">
                <img src="assets/image/Logo_cheerity.png" alt="Logo_cheerity" class="me-2">Cheerity</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item me-3"><a class="nav-link fw-bold" href="index.html">Beranda</a></li>
                    <li class="nav-item me-3"><a class="nav-link active fw-bold" href="campaign.html">Kampanye</a></li>
                    <li class="nav-item me-3"><a class="nav-link fw-bold" href="#">Volunteer</a></li>
                    <li class="nav-item me-3"><a class="nav-link fw-bold" href="planning.html">Donasi</a></li>
                    <li class="nav-item me-3"><a class="nav-link fw-bold" href="#">Leaderboard</a></li>
                    <li class="nav-item me-3"><a class="nav-link fw-bold" href="#">Tentang Kami</a></li>
                    <li class="nav-item me-3"><a class="btn btn-outline-primary" href="#">Masuk</a></li>
                    <li class="nav-item"><a class="btn btn-primary" href="#">Daftar</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="py-5">
        <div class="container-fluid px-5">
            <div class="row">
                <!-- Kalender dan Form -->
                <div class="col-md-4">
                    <div class="calendar">
                        <div class="form-toggle mb-3 d-flex gap-2">
                            <button class="btn btn-outline-primary" onclick="toggleForm('harian')">Harian</button>
                            <button class="btn btn-outline-primary" onclick="toggleForm('bulanan')">Bulanan</button>
                        </div>

                        <!-- Form Harian -->
                        <div id="formHarian">
                            <label for="start">Dari:</label>
                            <input type="date" id="start" class="form-control mb-2" />
                            <label for="end">Sampai:</label>
                            <input type="date" id="end" class="form-control mb-3" />
                            <button class="btn btn-warning w-100" onclick="savePlanning('harian')">Terapkan</button>
                        </div>

                        <!-- Form Bulanan -->
                        <div id="formBulanan" style="display: none;">
                            <label for="bulanMulai">Bulan Mulai:</label>
                            <select id="bulanMulai" class="form-control mb-2"></select>
                            <label for="bulanSampai">Bulan Sampai:</label>
                            <select id="bulanSampai" class="form-control mb-2"></select>
                            <label for="tahunBulanan">Tahun:</label>
                            <input type="number" id="tahunBulanan" class="form-control mb-3" placeholder="2025" />
                            <button class="btn btn-warning w-100" onclick="savePlanning('bulanan')">Terapkan</button>
                        </div>

                        <div class="d-flex justify-content-between align-items-center">
                            <button class="btn btn-sm btn-outline-secondary" onclick="changeMonth(-1)">&lt;</button>
                            <h5 class="text-center my-2" id="calendar-title">Mei 2025</h5>
                            <button class="btn btn-sm btn-outline-secondary" onclick="changeMonth(1)">&gt;</button>
                        </div>

                        <table class="table table-bordered mt-2">
                            <thead class="table-light">
                                <tr>
                                    <th>Mo</th>
                                    <th>Tu</th>
                                    <th>We</th>
                                    <th>Th</th>
                                    <th>Fr</th>
                                    <th>Sa</th>
                                    <th>Su</th>
                                </tr>
                            </thead>
                            <tbody id="calendar-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- List Donasi -->
                <div class="col-md-8">
                    <div>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="mb-0">All Planning</h4>
                            <div class="d-flex gap-2">
                                <input type="text" class="form-control" id="searchInput" placeholder="Search..." />
                                <select id="sortSelect" class="form-select">
                                    <option value="">Short by</option>
                                    <option value="name-asc">Nama A-Z</option>
                                    <option value="name-desc">Nama Z-A</option>
                                    <option value="date-asc">Tanggal Awal</option>
                                    <option value="date-desc">Tanggal Akhir</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <h5>Harian</h5>
                            <div id="donationListHarian"></div>
                            <h5 class="mt-4">Bulanan</h5>
                            <div id="donationListBulanan"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const calendarBody = document.getElementById("calendar-body");
        const calendarTitle = document.getElementById("calendar-title");
        const searchInput = document.getElementById("searchInput");
        const sortSelect = document.getElementById("sortSelect");
        const donationListHarian = document.getElementById("donationListHarian");
        const donationListBulanan = document.getElementById("donationListBulanan");

        let currentMonth = 4;
        let currentYear = 2025;
        let planningData = [];

        function populateMonthSelect(id) {
            const select = document.getElementById(id);
            select.innerHTML = "";
            const months = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
            months.forEach((month, index) => {
                select.innerHTML += `<option value="${index}">${month}</option>`;
            });
        }

        function generateCalendar(month, year) {
            calendarBody.innerHTML = "";
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDayIndex = (firstDay + 6) % 7;

            let date = 1;
            for (let i = 0; i < 6; i++) {
                let row = document.createElement("tr");
                for (let j = 0; j < 7; j++) {
                    let cell = document.createElement("td");
                    if ((i === 0 && j < firstDayIndex) || date > daysInMonth) {
                        cell.innerHTML = "";
                    } else {
                        cell.innerHTML = date;
                        cell.setAttribute("data-day", date);
                        date++;
                    }
                    row.appendChild(cell);
                }
                calendarBody.appendChild(row);
            }
            const monthNames = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
            calendarTitle.textContent = `${monthNames[month]} ${year}`;
        }

        function toggleForm(type) {
            document.getElementById("formHarian").style.display = type === "harian" ? "block" : "none";
            document.getElementById("formBulanan").style.display = type === "bulanan" ? "block" : "none";
        }

        function savePlanning(type) {
            if (type === "harian") {
                const start = new Date(document.getElementById("start").value);
                const end = new Date(document.getElementById("end").value);
                if (isNaN(start) || isNaN(end) || start > end) {
                    alert("Masukkan tanggal yang valid.");
                    return;
                }
                planningData.push({ name: "Paket Harian", start, end, price: 5000, type: "harian" });
            } else {
                const bulanMulai = parseInt(document.getElementById("bulanMulai").value);
                const bulanSampai = parseInt(document.getElementById("bulanSampai").value);
                const tahun = parseInt(document.getElementById("tahunBulanan").value);
                if (isNaN(bulanMulai) || isNaN(bulanSampai) || isNaN(tahun) || bulanMulai > bulanSampai) {
                    alert("Pilih bulan dan tahun dengan benar.");
                    return;
                }
                const start = new Date(tahun, bulanMulai, 1);
                const end = new Date(tahun, bulanSampai + 1, 0);
                planningData.push({ name: "Paket Bulanan", start, end, price: 100000, type: "bulanan" });
            }
            filterAndSortPlanning();
        }

        function renderPlanningCards(data, container) {
            container.innerHTML = data.map(plan => {
                const start = plan.start.getDate();
                const end = plan.end.getDate();
                const month = plan.start.getMonth();
                return `
            <div class="donation-card" onclick="highlightRange(${start}, ${end}, ${month}, ${plan.start.getFullYear()})">
              <div class="donation-icon">💰</div>
              <div class="donation-details">
                <h4>${plan.name}</h4>
                <small>Rp ${plan.price.toLocaleString()} | ${start}-${end} ${getMonthName(month)}</small>
              </div>
            </div>`;
            }).join("");
        }

        function filterAndSortPlanning() {
            let filtered = planningData.filter(plan =>
                plan.name.toLowerCase().includes(searchInput.value.toLowerCase())
            );
            switch (sortSelect.value) {
                case "name-asc": filtered.sort((a, b) => a.name.localeCompare(b.name)); break;
                case "name-desc": filtered.sort((a, b) => b.name.localeCompare(a.name)); break;
                case "date-asc": filtered.sort((a, b) => a.start - b.start); break;
                case "date-desc": filtered.sort((a, b) => b.start - a.start); break;
            }
            renderPlanningCards(filtered.filter(p => p.type === "harian"), donationListHarian);
            renderPlanningCards(filtered.filter(p => p.type === "bulanan"), donationListBulanan);
        }

        function highlightRange(startDate, endDate, month, year) {
            currentMonth = month;
            currentYear = year;
            generateCalendar(month, year);
            document.querySelectorAll("td").forEach(td => td.classList.remove("active"));
            for (let i = startDate; i <= endDate; i++) {
                const td = document.querySelector(`td[data-day="${i}"]`);
                if (td) td.classList.add("active");
            }
        }

        function getMonthName(index) {
            const months = ["Jan", "Feb", "Mar", "Apr", "Mei", "Jun", "Jul", "Agu", "Sep", "Okt", "Nov", "Des"];
            return months[index];
        }

        function changeMonth(offset) {
            currentMonth += offset;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar(currentMonth, currentYear);
        }

        // Init
        populateMonthSelect("bulanMulai");
        populateMonthSelect("bulanSampai");
        searchInput.addEventListener("input", filterAndSortPlanning);
        sortSelect.addEventListener("change", filterAndSortPlanning);
        generateCalendar(currentMonth, currentYear);
    </script>
    <footer>
        <div class="container-fluid p-5 bg-cheerity-footer" style="background-color: #F4BD22;">
            <div class="row">
                <div class="col-4">
                    <div class="d-flex flex-wrap align-items-center gap-1">
                        <img src="assets/image/Logo_putih.png" alt="Logo_cheerity" class="img-fluid" width="64" height="64">
                        <h3 class="fw-bold text-white">Cheerity</h3>
                    </div>
                    <p class="text-white text-justify">Menciptakan pengalaman amal yang tidak hanya berfokus pada bantuan sosial, tetapi juga menghadirkan kebahagiaan bagi semua yang terlibat. Dengan menggabungkan unsur charity dan fun, kegiatan ini akan mendorong lebih banyak orang untuk berbagi melalui aktivitas yang seru dan interaktif.</p>   
                </div>
                <div class="col-4">
                    <h5 class="fw-bold text-white">Layanan Kami</h5>
                    <ul class="list-unstyled">
                        <li class="mb-3"><a href="#" class="text-white">Home</a></li>
                        <li class="mb-3"><a href="#" class="text-white">About Us</a></li>
                        <li class="mb-3"><a href="#" class="text-white">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-4">
                    <h5 class="fw-bold text-white">Kontak Kami</h5>
                    <ul class="list-unstyled">
                        <li class="mb-3"><a href="#" class="text-white">Home</a></li>
                        <li class="mb-3"><a href="#" class="text-white">About Us</a></li>
                        <li class="mb-3"><a href="#" class="text-white">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="row border-top d-flex align-content-center mt-2">
                <div class="col-12 text-center p-2">
                    <div>© Copyright <strong><img src="assets/image/Logo_cheerity.png" alt="Logo_cheerity" srcset="" width="24" height="24" class="me-1"><span class="text-white">Cheerity</span></strong>. All Rights Reserved</div>
                    <div>Designed by <a href="#" style="text-decoration: none; color: #ffffff;">Cheerity Developer</a></div>
                </div>
            </div>
        </div>
    </footer>
    <script src="bootstrap/js/bootstrap.min.js"></script>
</body>

</html>